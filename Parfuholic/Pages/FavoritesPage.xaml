<Page x:Class="Parfuholic.Pages.FavoritesPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:models="clr-namespace:Parfuholic.Models"
      Background="#FFFFFF">

    <Grid>
        <Grid.RowDefinitions>
            <!-- Заголовок -->
            <RowDefinition Height="Auto"/>
            <!-- Список (прокручиваемый) -->
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- ЗАГОЛОВОК -->
        <TextBlock Text="Избранное"
                   FontWeight="SemiBold"
                   HorizontalAlignment="Center"
                   FontSize="28"
                   Margin="0,0,0,20"/>

        <!-- Сообщение если пусто -->
        <TextBlock x:Name="NoFavoritesMessage"
               Grid.Row="1"
               Text="Вы еще не добавили ни одного парфюма в избранное."
               FontSize="16"
               FontWeight="SemiBold"
               Foreground="Gray"
               HorizontalAlignment="Center"
               Margin="0,10,0,20"
               Visibility="Collapsed"/>

        <!-- SCROLL -->
        <ScrollViewer Grid.Row="1"
                      VerticalScrollBarVisibility="Auto">

            <ItemsControl x:Name="FavoritesItemsControl"
                          ItemsSource="{Binding Favorites}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel HorizontalAlignment="Center"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <ItemsControl.ItemTemplate>
                    <DataTemplate DataType="{x:Type models:Perfume}">
                        <Border Width="400"
                                Margin="15"
                                Background="White"
                                BorderThickness="1"
                                BorderBrush="#FFE0E0E0"
                                MouseLeftButtonUp="PerfumeCard_Click"
                                RenderTransformOrigin="0.5,0.5">

                            <!-- SCALE -->
                            <Border.RenderTransform>
                                <ScaleTransform ScaleX="1" ScaleY="1"/>
                            </Border.RenderTransform>

                            <!-- SHADOW -->
                            <Border.Effect>
                                <DropShadowEffect BlurRadius="12"
                                                  ShadowDepth="2"
                                                  Opacity="0.25"/>
                            </Border.Effect>

                            <!-- HOVER -->
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Trigger.EnterActions>
                                                <BeginStoryboard>
                                                    <Storyboard>
                                                        <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleX"
                                                                         To="1.05"
                                                                         Duration="0:0:0.15"/>
                                                        <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleY"
                                                                         To="1.05"
                                                                         Duration="0:0:0.15"/>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </Trigger.EnterActions>

                                            <Trigger.ExitActions>
                                                <BeginStoryboard>
                                                    <Storyboard>
                                                        <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleX"
                                                                         To="1"
                                                                         Duration="0:0:0.15"/>
                                                        <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleY"
                                                                         To="1"
                                                                         Duration="0:0:0.15"/>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </Trigger.ExitActions>

                                            <Setter Property="BorderBrush" Value="#FFB5B5B5"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>

                            <!-- CONTENT -->
                            <StackPanel>
                                <!-- IMAGE -->
                                <Border Height="400"
                                        Background="#FFF0F0F0"
                                        Padding="10">
                                    <Image Source="{Binding Image}"
                                           Stretch="UniformToFill"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           RenderOptions.BitmapScalingMode="HighQuality"
                                           UseLayoutRounding="True"
                                           SnapsToDevicePixels="True"
                                           RenderOptions.EdgeMode="Aliased"/>
                                </Border>

                                <!-- INFO -->
                                <StackPanel Margin="15">
                                    <TextBlock Text="{Binding Brand}"
                                               FontSize="14"
                                               FontWeight="SemiBold"/>

                                    <TextBlock Text="{Binding Name}"
                                               FontSize="18"
                                               FontWeight="Bold"
                                               Margin="0,2,0,0"/>

                                    <TextBlock Text="{Binding AromaGroup}"
                                               Foreground="Gray"
                                               FontSize="14"
                                               Margin="0,4,0,0"/>

                                    <TextBlock Text="{Binding Volume}"
                                               Foreground="Gray"
                                               Margin="0,2,0,0"/>

                                    <!-- PRICE -->
                                    <Grid Margin="0,8,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="10"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Column="0"
                                                   Text="{Binding PriceWithDiscount, StringFormat='{}{0:F2} BYN'}"
                                                   FontSize="20"
                                                   FontWeight="Bold"/>

                                        <TextBlock Grid.Column="2"
                                                   Text="{Binding Price, StringFormat='{}{0:F2} BYN'}"
                                                   FontSize="20"
                                                   FontWeight="Bold"
                                                   Foreground="Gray"
                                                   TextDecorations="Strikethrough">
                                            <TextBlock.Style>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="Visibility" Value="Collapsed"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding IsDiscount}" Value="True">
                                                            <Setter Property="Visibility" Value="Visible"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </TextBlock.Style>
                                        </TextBlock>
                                    </Grid>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </Grid>
</Page>
